---
import Prose from "@/components/common/Prose.astro";
import SectionHeading from "@/components/utilities/SectionHeading.astro";
import { aboutSection } from "@/config/site";
---

<div
  class="container relative z-10 mx-auto px-4"
  role="region"
  aria-labelledby="about-heading"
>
  <SectionHeading id="about-heading" className="about-heading-text opacity-0">
    {aboutSection.title}
  </SectionHeading>

  <div class="max-w-3xl space-y-6">
    {
      aboutSection.descriptions.length > 0 ? (
        aboutSection.descriptions.map((description, index) => (
          <Prose
            id={`about-paragraph-${index}`}
            className="about-paragraph opacity-0"
            set:html={description}
          />
        ))
      ) : (
        <p>No description available.</p>
      )
    }
  </div>
</div>

<script>
  import { initGsapFade, initGsapPopup } from "@/lib/gsapAnimations";

  // Animate the heading
  initGsapPopup(".about-heading-text", {
    duration: 0.8,
    delay: 0.2,
    y: 50,
    animateEachTime: true,
  });

  // Animate the paragraphs
  const paragraphs = document.querySelectorAll(".about-paragraph");
  paragraphs.forEach((_, index) => {
    initGsapFade(`.about-paragraph:nth-child(${index + 1})`, {
      duration: 0.8,
      delay: 0.5 + index * 0.2,
      direction: "up",
      distance: 30,
      animateEachTime: true,
    });
  });
</script>
