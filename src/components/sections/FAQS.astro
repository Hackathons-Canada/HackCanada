---
import SectionWrapper from "@/components/utilities/SectionWrapper.astro";
import { cn } from "@/lib/utils";
import faqs from "@/config/faqs";
import FaqCategory from "../FAQ/FaqCategory.astro";
import { Image } from "astro:assets";
import { faqsSection } from "@/config/site";

interface Props {
  className?: string;
  id?: string;
}

const { className, id } = Astro.props;
---

<SectionWrapper
  id={id}
  className={cn("relative z-10 overflow-hidden py-20 md:py-32", className)}
>
  <!-- <FaqAssets /> -->
  <div class="absolute inset-0">
    <Image
      src="/faq/flower-1.webp"
      alt="Flower 1"
      width={1}
      height={1}
      class="faq-asset absolute left-[5%] top-52 w-12 animate-rotateSlow object-cover sm:left-[15%] md:top-64 lg:left-[20%] xl:left-1/2 xl:top-72 xl:w-16"
    />
    <Image
      src="/faq/flower-2.webp"
      alt="Flower 2"
      width={1}
      height={1}
      class="faq-asset absolute right-[10%] top-[600px] w-12 animate-float object-cover md:right-1/4 xl:left-40 xl:top-64 xl:w-16"
    />
    <Image
      src="/faq/flower-2.webp"
      alt="Flower 3"
      width={1}
      height={1}
      class="faq-asset absolute left-1/4 top-[1100px] w-12 animate-float object-cover xl:left-3/4 xl:top-[500px] xl:w-16"
    />
    <Image
      src="/faq/flower-1.webp"
      alt="Flower 4"
      width={1}
      height={1}
      class="faq-asset absolute left-2/3 top-[1650px] w-12 animate-rotateSlow object-cover xl:left-[60%] xl:top-[825px] xl:w-16"
    />
    <Image
      src="/faq/butterfly.webp"
      alt="Butterfly"
      width={1}
      height={1}
      class="faq-asset absolute right-[5%] top-[1000px] w-12 animate-float object-cover sm:top-[1050px] lg:right-[15%] xl:left-1/3 xl:top-[600px] xl:w-16 xl:-translate-x-1/2"
    />
    <Image
      src="/faq/butterfly-2.webp"
      alt="Butterfly 2"
      width={1}
      height={1}
      class="faq-asset absolute bottom-[200px] left-[5%] w-12 -translate-x-1/2 animate-float object-cover sm:bottom-[100px] sm:left-[15%] xl:left-[40%] xl:top-[1000px] xl:w-16"
    />
  </div>

  <h2
    class="faq-heading heading-font mb-20 translate-y-10 text-center text-4xl font-black sm:text-5xl md:mb-24 lg:text-6xl xl:mb-28 xl:text-7xl"
  >
    {faqsSection.title}
  </h2>

  <div
    class="faq-categories mx-auto grid max-w-screen-2xl grid-cols-1 flex-col items-start justify-start gap-12 px-4 xl:grid-cols-2"
  >
    <div class="flex flex-col gap-12">
      {faqs.slice(0, 2).map((category) => <FaqCategory category={category} />)}
    </div>
    <div class="flex flex-col gap-12">
      {faqs.slice(2, 4).map((category) => <FaqCategory category={category} />)}
    </div>
  </div>
</SectionWrapper>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  gsap.from(".faq-heading", {
    y: 50,
    opacity: 0,
    duration: 1,
    ease: "power3.out",
    scrollTrigger: {
      trigger: ".faq-heading",
      start: "top 80%",
      end: "bottom top",
      toggleActions: "play none none reverse",
    },
  });
</script>
