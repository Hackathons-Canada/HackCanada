---
import SectionWrapper from "@/components/layout/SectionWrapper.astro";
import SectionHeading from "@/components/utility/SectionHeading.astro";
import { cn } from "@/lib/utils";

interface Props {
  className?: string;
  id?: string;
}

const { className, id } = Astro.props;
---

<SectionWrapper id={id} className={cn("relative py-20", className)}>
  <div class="container">
    <SectionHeading className="">Sponsor Us</SectionHeading>
    <div>
      Join us in this amazing ride to host the best hackathon across Canada.
      <br />
      Your support will be sweeter than the finest maple syrup
    </div>
  </div>

  <div class="relative flex w-full justify-center">
    <div
      class="jar-container relative flex h-fit w-full max-w-4xl justify-between bg-black"
    >
      <div class="relative z-0 h-32 w-32 md:h-40 md:w-40">
        <div
          class="absolute -bottom-48 right-0 -z-10 h-[208px] w-[20px] rounded-tr-full bg-orange-400"
        >
          <div
            class="absolute -bottom-[5px] right-0 h-[10px] w-[5px] rounded bg-orange-400"
          >
          </div>
          <div
            class="absolute -bottom-[4px] right-[5px] h-[10px] w-[5px] rounded bg-orange-400"
          >
          </div>
          <div
            class="absolute -bottom-[7px] right-[10px] h-[10px] w-[5px] rounded bg-orange-400"
          >
          </div>
          <div
            class="absolute -bottom-[5px] right-[15px] h-[10px] w-[5px] rounded bg-orange-400"
          >
          </div>
        </div>
        <img
          src="/sponsors/design/jarleft.svg"
          alt="jar"
          width="100"
          height="100"
          style="width: 100%;"
        />
      </div>
      <div class="relative z-0 h-32 w-32 md:h-40 md:w-40">
        <div
          class="absolute -bottom-48 left-0 -z-10 h-[208px] w-[20px] rounded-tl-full bg-orange-400"
        >
          <div
            class="absolute -bottom-[5px] right-0 h-[10px] w-[5px] rounded bg-orange-400"
          >
          </div>
          <div
            class="absolute -bottom-[4px] right-[5px] h-[10px] w-[5px] rounded bg-orange-400"
          >
          </div>
          <div
            class="absolute -bottom-[7px] right-[10px] h-[10px] w-[5px] rounded bg-orange-400"
          >
          </div>
          <div
            class="absolute -bottom-[5px] right-[15px] h-[10px] w-[5px] rounded bg-orange-400"
          >
          </div>
        </div>
        <img
          src="/sponsors/design/jarright.svg"
          alt="jar"
          width="100"
          height="100"
          style="width: 100%;"
        />
      </div>
    </div>
    <div
      class="absolute left-1/2 top-[calc(6rem+208px)] h-80 w-full max-w-4xl -translate-x-1/2 rounded-[3px] rounded-t-3xl bg-orange-400 md:top-[calc(8rem+208px)]"
    >
      <div class="absolute -bottom-[110px] h-fit w-full">
        <div class="mx-auto w-full max-w-4xl">
          <svg
            id="morphingSvg"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 871.18 111.83"
          >
            <path
              fill="#fb923c"
              d="M0 0s-3 0 56 0c57 0 49 0 74 0 15 0 32 0 56 0s37 0 58 0c19 0 18 0 54 0 31 0 32 0 45 0 8 0 18 0 31 0 16 0 16 0 30 0S418 0 433 0s15 0 36 0c20 0-4 0 33 0 40 0 20 0 40 0 10 0 20 0 45 0 29 0 37 0 55 0 13 0 28 0 48 0 28 0 36 0 52 0 28 0 18 0 66 0C844 0 871 0 871 0"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
  <div class="right-0 h-[600px] w-full bg-white"></div>
</SectionWrapper>

<script>
  import anime from "animejs";

  const initialPoints =
    "M0 0s-3 0 56 0c57 0 49 0 74 0 15 0 32 0 56 0s37 0 58 0c19 0 18 0 54 0 31 0 32 0 45 0 8 0 18 0 31 0 16 0 16 0 30 0S418 0 433 0s15 0 36 0c20 0-4 0 33 0 40 0 20 0 40 0 10 0 20 0 45 0 29 0 37 0 55 0 13 0 28 0 48 0 28 0 36 0 52 0 28 0 18 0 66 0C844 0 871 0 871 0";

  const finalPoints =
    "M0 0s-3 106 47 112c57 6 49-66 74-73 15-4 32 27 56 27s37-22 58-27c19-4 18 73 54 73 31 0 32-63 45-73 8-7 18 5 31 3 16-3 16-7 30-10S418 61 433 62s15-26 36-24c20 2-4 62 33 63 40 1 20-46 40-57 10-5 20 37 45 36 29-2 37-41 55-43 13-2 28 22 48 21 28-1 36-31 52-32 28-2 18 71 66 72C844 100 871 4 871 4";

  function animateSVG() {
    const svg = document.querySelector("#morphingSvg");
    const path = svg!.querySelector("path");

    anime({
      targets: path,
      d: [{ value: initialPoints }, { value: finalPoints }],
      duration: 2000,
      easing: "easeOutQuad",
      direction: "d",
    });
  }

  // Run the animation when the component mounts
  document.addEventListener("DOMContentLoaded", animateSVG);
</script>
